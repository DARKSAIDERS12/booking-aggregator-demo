# –û—Ç—á–µ—Ç –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ Booking Aggregator

## –î–∞—Ç–∞: 21 –∞–≤–≥—É—Å—Ç–∞ 2025

### üéØ –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å: 80% –ó–ê–í–ï–†–®–ï–ù–û

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

#### 1. **–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
- ‚úÖ Node.js + Express —Å–µ—Ä–≤–µ—Ä
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ Middleware –∏ CORS

#### 2. **API Endpoints**
- ‚úÖ `GET /api/races` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ–π—Å–æ–≤
- ‚úÖ `GET /api/races/search` - –ø–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É
- ‚úÖ `GET /api/races/:id` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Ä–µ–π—Å–µ
- ‚úÖ `GET /api/orders` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ `POST /api/orders/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–∫–∞–∑–∞
- ‚úÖ `POST /api/orders/payment` - –æ–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞
- ‚úÖ `POST /api/orders/cancel` - –æ—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞
- ‚úÖ `GET /api/orders/:id` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ

#### 3. **–°–µ—Ä–≤–∏—Å—ã**
- ‚úÖ `RaceService` - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ä–µ–π—Å–∞—Ö
- ‚úÖ `OrderService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
- ‚úÖ `Api1Service` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GDS SOAP API
- ‚úÖ `Api2Service` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Paybilet REST API
- ‚úÖ `StrapiService` - —Ä–∞–±–æ—Ç–∞ —Å CMS

#### 4. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/`)
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞ —Ä–µ–π—Å–æ–≤ (`/race-search.html`)
- ‚úÖ –ë–∞–∑–æ–≤—ã–π –¥–∏–∑–∞–π–Ω –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

#### 5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API**
- ‚úÖ GDS SOAP API (API 1) - —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ Paybilet REST API (API 2) - —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback

### üîß –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ—Å—Å–∏–∏:

1. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º `this` –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∏–≤—è–∑–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º –∫–ª–∞—Å—Å–æ–≤
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ "Cannot read properties of undefined"

2. **API –¥–ª—è —Ä–µ–π—Å–æ–≤**
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω `RaceController`
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã `/api/races/*`
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `RaceService`

3. **API –¥–ª—è –∑–∞–∫–∞–∑–æ–≤**
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω `OrderController`
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã `/api/orders/*`
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `OrderService`

4. **–°–µ—Ä–≤–∏—Å—ã**
   - `RaceService` - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥–≤—É—Ö API
   - `OrderService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
   - `StrapiService` - –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç–∞–Ω—Ü–∏—è–º–∏

### üöß –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:

#### 1. **–†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API**
- üî¥ GDS SOAP API —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- üî¥ Paybilet API —Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫
- üî¥ –ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

#### 2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏—è–º–∏**
- üî¥ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞–Ω—Ü–∏–π (`/api/stations`)
- üî¥ API –¥–ª—è —Å—Ç–∞–Ω—Ü–∏–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (`/api/stations/from`)
- üî¥ –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–π –º–µ–∂–¥—É API

#### 3. **Strapi CMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- üî¥ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç-—Ç–∏–ø–æ–≤ –¥–ª—è —Å—Ç–∞–Ω—Ü–∏–π
- üî¥ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏
- üî¥ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å—Ç–∞–Ω—Ü–∏–π

#### 4. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- üî¥ Dashboard –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- üî¥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π —Å—Ç–∞–Ω—Ü–∏–π
- üî¥ –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ —Ä–µ–π—Å–æ–≤ (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è)

### üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
src/
‚îú‚îÄ‚îÄ controllers/          # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API
‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ routes/              # –ú–∞—Ä—à—Ä—É—Ç—ã Express
‚îú‚îÄ‚îÄ app.ts               # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ index.ts             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- Express.js –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
- TypeScript –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- Axios –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- SOAP –¥–ª—è GDS API
- Prisma –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API**
2. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è API –¥–ª—è —Å—Ç–∞–Ω—Ü–∏–π**
3. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç-—Ç–∏–ø–æ–≤ –≤ Strapi**
4. **–î–æ—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**

### üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- API endpoints –æ—Ç–≤–µ—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –û—Å–Ω–æ–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö API –∏ Strapi

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ–µ–∫—Ç–∞*
