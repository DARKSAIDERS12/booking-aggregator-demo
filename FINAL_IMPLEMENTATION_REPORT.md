# üöå –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ Booking Aggregator

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç **Booking Aggregator** - —ç—Ç–æ API —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –¥–≤—É—Ö —Å–∏—Å—Ç–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ–±—É—Å–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤:
- **API 1**: GDS SOAP API (—Å–∏—Å—Ç–µ–º–∞ 1)
- **API 2**: Paybilet RF Bus REST API (—Å–∏—Å—Ç–µ–º–∞ 2)

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. **–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤** - 100% ‚úÖ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–π –≤—Ä—É—á–Ω—É—é –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ API
- ‚úÖ –î–≤–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö API (api1-station, api2-station)
- ‚úÖ –¢—Ä–µ—Ç—å—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π (station-mapping)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ + —Ä—É—á–Ω–æ–µ
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å—Ç–∞–Ω—Ü–∏–π (station-group)
- ‚úÖ –ü–æ–ª–Ω—ã–π CRUD –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

### 2. **API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç–∞–Ω—Ü–∏—è–º–∏** - 100% ‚úÖ
- ‚úÖ `GET /api/stations` - –≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏
- ‚úÖ `GET /api/stations/from/:from` - —Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –ü–æ–ª–Ω—ã–π CRUD –¥–ª—è –≥—Ä—É–ø–ø –∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π
- ‚úÖ API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π

### 3. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - 100% ‚úÖ
- ‚úÖ Dashboard –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π —Å—Ç–∞–Ω—Ü–∏–π
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞ —Ä–µ–π—Å–æ–≤
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

### 4. **API –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ–π—Å–æ–≤** - 80% ‚úÖ
- ‚úÖ `GET /api/routes/search` - –ø–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É
- ‚úÖ `GET /api/routes/:id` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Ä–µ–π—Å–µ
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

### 5. **–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤** - 0% ‚ùå
- ‚ùå `POST /api/register` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤
- ‚ùå `POST /api/payment` - –æ–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞
- ‚ùå `POST /api/cancel` - –æ—Ç–º–µ–Ω–∞ –±–∏–ª–µ—Ç–æ–≤
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏

### 6. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API** - 20% ‚úÖ
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è API 1 –∏ API 2
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- ‚ùå –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GDS SOAP API
- ‚ùå –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Paybilet REST API

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
booking-aggregator/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/          # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API
‚îÇ   ‚îú‚îÄ‚îÄ routes/              # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û
‚îÇ   ‚îî‚îÄ‚îÄ types/               # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ public/                  # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ index.html          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html      # Dashboard
‚îÇ   ‚îú‚îÄ‚îÄ station-management.html # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ race-search.html    # –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤
‚îî‚îÄ‚îÄ admin-panel/            # Strapi CMS
    ‚îî‚îÄ‚îÄ src/api/            # Content Types
```

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ó–∞–ø—É—Å–∫ Booking Aggregator
```bash
cd booking-aggregator
npm install
npm run build
npm start
```

### 2. –ó–∞–ø—É—Å–∫ Strapi CMS
```bash
cd admin-panel
npm install
npm run develop
```

### 3. –î–æ—Å—Ç—É–ø –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: http://localhost:3000/
- Dashboard: http://localhost:3000/dashboard.html
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏—è–º–∏: http://localhost:3000/station-management.html
- –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤: http://localhost:3000/race-search.html

## üìä –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 75%

- ‚úÖ **–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–π**: 100%
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏—è–º–∏**: 100%  
- ‚úÖ **–ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤**: 80%
- ‚ùå **–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤**: 0%
- ‚ùå **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API**: 20%
- ‚úÖ **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: 100%

## üîß –ß—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

### 1. **–ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤**
```bash
curl "http://localhost:3000/api/routes/search?from=–Æ–∂–Ω–æ-–°–∞—Ö–∞–ª–∏–Ω—Å–∫&to=–•–æ–ª–º—Å–∫&date=2025-08-22"
```

### 2. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/race-search.html
- –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
- –ù–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏ —Ä–µ–π—Å—ã"

### 3. **API endpoints**
- `GET /api/routes/search` - –ø–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤
- `GET /api/stations` - –≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏
- `GET /api/sync/*` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

## üöß –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### 1. **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**
- –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GDS SOAP API
- –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Paybilet REST API
- –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤ (–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø–ª–∞—Ç–∞, –æ—Ç–º–µ–Ω–∞)

### 2. **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–Ω–µ—à–Ω–∏—Ö API
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 3. **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- Rate limiting
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### 1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API**
```typescript
// –í api1Service.ts –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é SOAP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
async searchRaces(params: SearchParams): Promise<Race[]> {
  const soapClient = new SoapClient(this.baseUrl);
  const response = await soapClient.searchRaces(params);
  return this.transformSoapResponse(response);
}
```

### 2. **–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤**
```typescript
// –°–æ–∑–¥–∞—Ç—å orderService.ts —Å —Ä–µ–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
async registerOrder(orderData: OrderData): Promise<Order> {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –±–∞–∑–µ
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –≤–Ω–µ—à–Ω–∏–µ API
  // –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
}
```

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
```typescript
// –î–æ–±–∞–≤–∏—Ç—å graceful degradation
try {
  const api1Results = await this.api1Service.searchRaces(params);
  return api1Results;
} catch (error) {
  console.error('API 1 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:', error);
  // –ü—Ä–æ–±—É–µ–º API 2
  return await this.api2Service.searchRaces(params);
}
```

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç **Booking Aggregator** —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ **75%** —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é. 

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å—Ç–∞–Ω—Ü–∏–π
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π
- API –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ–π—Å–æ–≤ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API

**–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:**
- –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API
- –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ graceful degradation

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∫–∞–∫ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

---
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞:** 21 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** 75% –∑–∞–≤–µ—Ä—à–µ–Ω–æ
